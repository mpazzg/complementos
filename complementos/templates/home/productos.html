{% extends 'base.html' %}
{% block title %} Lista de productos {% endblock %}
{% block content %}
<h1>Catalogo de productos</h1>
<br>
{% if user.is_authenticated %}
<a href="{% url "vista_agregar_producto" %}">Agregar nuevo</a><br>
{% endif %}
{% if productos %}
	<table class="table table-hover">
		<thead>
			<tr>
			 <th>Producto</th>
			 <th>Precio</th>
			 <th>Stock</th>
			</tr>
		</thead>
	{% for p in productos %}
		<tbody>
		  <tr id="tr{{p.id}}">
		  <td>{{ p.nombre }}</td>
		  <td>{{ p.precio }}</td>
		  <td>{{ p.stock }}</td>
		  <td><a class="btn" href="/producto/{{p.id}}/"><i class="icon-search"></i> Detalles del producto</a></td>
		  <td><a class="btn" href="#"><i class="icon-shopping-cart"></i> Comprar(no se puede comprar)</a></td>
		  {% if user.is_authenticated and user.is_staff %}
			<td><a class="btn" href="/edit/producto/{{p.id}}/"><i class="icon-pencil"></i> Editar </a></td>
			<td><a href="#myModal" role="button" class="btn btn-danger delete" data-toggle="modal" id="{{p.id}}" data-name="{{p.nombre}}"><i class="icon-trash icon-white"></i>Eliminar</a></td>
		  {% endif %}
</tr>
</tbody>

	
	{% endfor %}
	</table>
{% else %}
	<h2>No existen productos activos a la venta</h2>
{% endif %}
<br><br><br>
{% if productos %}
        <a href="/productos/page/1"> << </a>
        {% if productos.has_previous %}
                <a href="/productos/page/{{productos.previous_page_number}}/"> Anterior </a>
        {% else %}
                <a href="#"> Anterior </a>
        {% endif %}
        {% if productos.has_next %}
                <a href="/productos/page/{{productos.next_page_number}}/">Siguiente</a>
        {% else %}
                <a href="#"> Siguiente </a>
	{% endif %}
		<a href="/productos/page/{{productos.paginator.num_pages}}/"> >> </a>

<br><br><br>
	<h4> PÃ¡gina {{ productos.number}} de {{ productos.paginator.num_pages }}</h4>

{% endif %}
{% endblock %}
